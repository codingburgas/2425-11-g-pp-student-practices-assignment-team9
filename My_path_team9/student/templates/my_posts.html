{% extends 'base.html' %}
{% block content %}
<div class="container">
    <div class="student-box">
        <h1 class="mb-4">My Posts</h1>

        <!-- New Post Form -->
        <form method="POST">
            <div class="mb-3">
                <textarea name="content" rows="4" placeholder="Write something..." style="width: 100%; padding: 10px;" required></textarea>
            </div>
            <button type="submit" class="view-btn">Post</button>
        </form>

        <hr>
        <h2 class="mt-4">Your Posts</h2>

        {% if posts %}
            <div class="grid gap-4">
                {% for post in posts %}
                    <div class="bg-white dark:bg-zinc-800 border border-gray-200 dark:border-gray-600 rounded-xl p-4 shadow-md">
                        {% if post.image_url %}
                            <img src="{{ post.image_url }}" alt="Post image" class="w-full rounded mb-3">
                        {% endif %}

                        <p>{{ post.content }}</p>

                        {% if post.timestamp %}
                            <small class="text-gray-500">Posted on {{ post.timestamp.strftime('%Y-%m-%d %H:%M') }}</small><br>
                        {% endif %}

                        <div class="mt-2 flex items-center gap-3">
                            <a href="{{ url_for('student.edit_post', post_id=post.id) }}" class="text-blue-500 hover:underline">Edit</a>

                            <form action="{{ url_for('student.delete_post', post_id=post.id) }}" method="POST" style="display:inline;">
                                <button type="submit" class="text-red-500 bg-transparent border-none cursor-pointer hover:underline ml-2">Delete</button>
                            </form>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p>You haven't posted anything yet.</p>
        {% endif %}
    </div>
</div>
{% endblock %}
